!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?r(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},r=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=e=>{document.querySelectorAll(e.formSelector).forEach(t=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);o(n,a,t),e.addEventListener("reset",()=>{r(a,t)}),n.forEach(r=>{r.addEventListener("input",function(){((e,t,o)=>{t.validity.valid?((e,t,o)=>{const r=t.id+"-error",n=e.querySelector(`#${r}`);n.textContent="",n.classList.remove(o.errorClass),t.classList.remove(o.inputErrorClass)})(e,t,o):((e,t,o,r)=>{const n=t.id+"-error",a=e.querySelector(`#${n}`);a.textContent=o,a.classList.add(r.errorClass),t.classList.add(r.inputErrorClass)})(e,t,t.validationMessage,o)})(e,r,t),o(n,a,t)})})})(t,e)})};n(t);var a=e+"418980fdb81d7ceb84cc.jpg",c=e+"da7ae2ac910426f62176.jpg",l=e+"b431bbb397d7a39486fd.jpg",i=e+"44b92084d1c40cb0a70b.jpg",d=e+"ac218ab8ae2c025add31.jpg",s=e+"f37cd48ce187723b17f6.jpg";const u=document.querySelectorAll(".modal"),m=[{name:"Golden Gate Bridge",link:a},{name:"Val Thorens",link:c},{name:"Restaurant terrace",link:l},{name:"An outdoor cafe",link:i},{name:"A very long bridge, over the forest and through the trees",link:d},{name:"Tunnel with morning light",link:s},{name:"Mountain house",link:s}],_=document.querySelector(".profile__edit-btn"),p=document.querySelector("#edit-profile-modal"),v=(p.querySelector(".modal__close-btn"),document.forms["edit-profile-form"]),f=p.querySelector("#profile-name-input"),y=p.querySelector("#profile-description-input"),S=document.querySelector(".profile__new-post-btn"),b=document.querySelector("#new-post-modal"),q=(b.querySelector(".modal__close-btn"),document.forms["new-post-form"]),L=b.querySelector("#card-image-input"),g=b.querySelector("#card-caption-input"),k=b.querySelector(".modal__save-btn"),E=document.querySelector(".profile__name"),C=document.querySelector(".profile__description"),h=document.querySelector("#preview-modal"),w=(h.querySelector(".modal__close-btn"),h.querySelector(".modal__image")),x=h.querySelector(".modal__caption"),A=document.querySelector("#card-template").content.querySelector(".card"),j=document.querySelector(".cards__list");function B(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&M(e)}}function D(e){const t=A.cloneNode(!0),o=t.querySelector(".card__caption"),r=t.querySelector(".card__image");r.src=e.link,r.alt=e.name,o.textContent=e.name;const n=t.querySelector(".card__like-btn");n.addEventListener("click",()=>{n.classList.toggle("card__like-btn_active")});const a=t.querySelector(".card__delete-btn");return a.addEventListener("click",()=>{a.closest(".card").remove()}),r.addEventListener("click",()=>{w.src=e.link,w.alt=e.name,x.textContent=e.name,G(h)}),t}function G(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",B)}function M(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",B)}u.forEach(e=>{e.addEventListener("mousedown",t=>{(t.target===e||t.target.classList.contains("modal__close-btn"))&&M(e)})}),_.addEventListener("click",function(){f.value=E.textContent,y.value=C.textContent;const e=Array.from(v.querySelectorAll(t.inputSelector));resetValidation(v,e,t),G(p)}),v.addEventListener("submit",function(e){e.preventDefault(),E.textContent=f.value,C.textContent=y.value,M(p)}),S.addEventListener("click",function(){G(b)}),q.addEventListener("submit",function(e){e.preventDefault();const o=D({name:g.value,link:L.value});j.prepend(o),e.target.reset(),r(k,t),M(b)}),m.forEach(function(e){const t=D(e);j.append(t)}),n(t)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckIsRUFDbkIsR0FFQTFELEVBQWlCckIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dJRCA9IGlucHV0RWwuaWQgKyBcIi1lcnJvclwiO1xuICBjb25zdCBlcnJvckVsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2Vycm9yTXNnSUR9YCk7XG4gIGVycm9yRWwudGV4dENvbnRlbnQgPSBlcnJvck1zZztcbiAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dJRCA9IGlucHV0RWwuaWQgKyBcIi1lcnJvclwiO1xuICBjb25zdCBlcnJvckVsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2Vycm9yTXNnSUR9YCk7XG4gIGVycm9yRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBmb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWwpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWwsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKTtcblxuZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpIHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGRpc2FibGVCdXR0b24sXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCBpbWcxIGZyb20gXCIuLi9pbWFnZXMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCI7XG5pbXBvcnQgaW1nMiBmcm9tIFwiLi4vaW1hZ2VzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIjtcbmltcG9ydCBpbWczIGZyb20gXCIuLi9pbWFnZXMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiO1xuaW1wb3J0IGltZzQgZnJvbSBcIi4uL2ltYWdlcy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIjtcbmltcG9ydCBpbWc1IGZyb20gXCIuLi9pbWFnZXMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIjtcbmltcG9ydCBpbWc2IGZyb20gXCIuLi9pbWFnZXMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCI7XG5cbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHsgbmFtZTogXCJHb2xkZW4gR2F0ZSBCcmlkZ2VcIiwgbGluazogaW1nMSB9LFxuICB7IG5hbWU6IFwiVmFsIFRob3JlbnNcIiwgbGluazogaW1nMiB9LFxuICB7IG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsIGxpbms6IGltZzMgfSxcbiAgeyBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLCBsaW5rOiBpbWc0IH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IGltZzUsXG4gIH0sXG4gIHsgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsIGxpbms6IGltZzYgfSxcbiAgeyBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsIGxpbms6IGltZzYgfSxcbl07XG5jb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZUNsb3NlQnRuID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdO1xuY29uc3QgZWRpdFByb2ZpbGVOYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiXG4pO1xuY29uc3QgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBuZXdQb3N0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctcG9zdC1idG5cIik7XG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3QtZm9ybVwiXTtcbmNvbnN0IG5ld1Bvc3RJbWFnZUlucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZS1pbnB1dFwiKTtcbmNvbnN0IG5ld1Bvc3RDYXB0aW9uSW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNhcHRpb24taW5wdXRcIik7XG5jb25zdCBjYXJkU2F2ZUJ0biA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBpZiAob3BlbmVkTW9kYWwpIHtcbiAgICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZENhcHRpb24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NhcHRpb25cIik7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZENhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG5cbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG4gIGNhcmREZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRGVsZXRlQnRuLmNsb3Nlc3QoXCIuY2FyZFwiKS5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld01vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbEltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NDbG9zZSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjQ2xvc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59XG5cbm1vZGFscy5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldnQudGFyZ2V0ID09PSBtb2RhbCB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnRuXCIpXG4gICAgKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudDtcbiAgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQ7XG4gIC8vIENsZWFyIHZhbGlkYXRpb24gZXJyb3JzIHdoZW4gb3BlbmluZyB0aGUgbW9kYWxcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBlZGl0UHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0UHJvZmlsZUZvcm0sIGlucHV0TGlzdCwgdmFsaWRhdGlvbkNvbmZpZyk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5cbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxubmV3UG9zdFByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcbiAgICBuYW1lOiBuZXdQb3N0Q2FwdGlvbklucHV0LnZhbHVlLFxuICAgIGxpbms6IG5ld1Bvc3RJbWFnZUlucHV0LnZhbHVlLFxuICB9O1xuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaW5wdXRWYWx1ZXMpO1xuICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG5cbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuXG4gIGRpc2FibGVCdXR0b24oY2FyZFNhdmVCdG4sIHZhbGlkYXRpb25Db25maWcpO1xuXG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwiY29uZmlnIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImVuYWJsZVZhbGlkYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZm9ybUVsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJidXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnB1dEVsIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvck1zZ0lEIiwiaWQiLCJlcnJvckVsIiwidGV4dENvbnRlbnQiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTXNnIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJtb2RhbHMiLCJpbml0aWFsQ2FyZHMiLCJuYW1lIiwibGluayIsImltZzEiLCJpbWcyIiwiaW1nMyIsImltZzQiLCJpbWc1IiwiaW1nNiIsImVkaXRQcm9maWxlQnRuIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRQcm9maWxlRm9ybSIsImZvcm1zIiwiZWRpdFByb2ZpbGVOYW1lSW5wdXQiLCJlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJuZXdQb3N0QnRuIiwibmV3UG9zdE1vZGFsIiwibmV3UG9zdFByb2ZpbGVGb3JtIiwibmV3UG9zdEltYWdlSW5wdXQiLCJuZXdQb3N0Q2FwdGlvbklucHV0IiwiY2FyZFNhdmVCdG4iLCJwcm9maWxlTmFtZUVsIiwicHJvZmlsZURlc2NyaXB0aW9uRWwiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZSIsInByZXZpZXdNb2RhbENhcHRpb24iLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZHNMaXN0IiwiaGFuZGxlRXNjQ2xvc2UiLCJldnQiLCJrZXkiLCJvcGVuZWRNb2RhbCIsImNsb3NlTW9kYWwiLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNsb25lTm9kZSIsImNhcmRDYXB0aW9uIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwiY2FyZExpa2VCdG4iLCJ0b2dnbGUiLCJjYXJkRGVsZXRlQnRuIiwiY2xvc2VzdCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwidmFsdWUiLCJyZXNldFZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJyZXNldCIsIml0ZW0iLCJhcHBlbmQiXSwic291cmNlUm9vdCI6IiJ9